// SPDX-FileCopyrightText: 2025 Nomadic Labs <contact@nomadic-labs.com>
//
// SPDX-License-Identifier: MIT

use revm::primitives::{Address, FixedBytes};

// Snippet used to generate `WITHDRAWAL_SOL_CONTRACT` (use in test_withdrawal_contract):
// let created_account = world_state_handler
//     .get_or_create(&host, &account_path(&addr.unwrap()).unwrap())
//     .unwrap();
// let code = created_account.code(&host).unwrap();
// println!("STORED = {:?}", code.clone());

pub(crate) const WITHDRAWAL_SOL_CONTRACT: &str = "0x608060405260043610610028575f3560e01c806320d786b51461002c578063cda4fee214610056575b5f5ffd5b348015610037575f5ffd5b50610040610072565b60405161004d91906103ab565b60405180910390f35b610070600480360381019061006b9190610511565b610077565b005b5f5481565b5f73ff0000000000000000000000000000000000000390505f3490505f64e8d4a5100090505f81836100a991906105b2565b90505f82846100b891906105e2565b90505f84116100fc576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016100f39061066c565b60405180910390fd5b5f811461013e576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610135906106fa565b60405180910390fd5b5f8683604051602401610152929190610768565b6040516020818303038152906040527f7bced8e4000000000000000000000000000000000000000000000000000000007bffffffffffffffffffffffffffffffffffffffffffffffffffffffff19166020820180517bffffffffffffffffffffffffffffffffffffffffffffffffffffffff838183161783525050505090505f8673ffffffffffffffffffffffffffffffffffffffff16826040516101f791906107da565b5f604051808303815f865af19150503d805f8114610230576040519150601f19603f3d011682016040523d82523d5f602084013e610235565b606091505b5050905080610279576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016102709061083a565b60405180910390fd5b5f5f73ffffffffffffffffffffffffffffffffffffffff168760405161029e9061087b565b5f6040518083038185875af1925050503d805f81146102d8576040519150601f19603f3d011682016040523d82523d5f602084013e6102dd565b606091505b5050905080610321576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610318906108d9565b60405180910390fd5b3373ffffffffffffffffffffffffffffffffffffffff167f0217d2f84deede7e64b4ddb96e2a4407ee7348091dc9c33657f0b7cbe44e625e885f5460405161036a9291906108f7565b60405180910390a25f5f8154809291906103839061091e565b9190505550505050505050505050565b5f819050919050565b6103a581610393565b82525050565b5f6020820190506103be5f83018461039c565b92915050565b5f604051905090565b5f5ffd5b5f5ffd5b5f5ffd5b5f5ffd5b5f601f19601f8301169050919050565b7f4e487b71000000000000000000000000000000000000000000000000000000005f52604160045260245ffd5b610423826103dd565b810181811067ffffffffffffffff82111715610442576104416103ed565b5b80604052505050565b5f6104546103c4565b9050610460828261041a565b919050565b5f67ffffffffffffffff82111561047f5761047e6103ed565b5b610488826103dd565b9050602081019050919050565b828183375f83830152505050565b5f6104b56104b084610465565b61044b565b9050828152602081018484840111156104d1576104d06103d9565b5b6104dc848285610495565b509392505050565b5f82601f8301126104f8576104f76103d5565b5b81356105088482602086016104a3565b91505092915050565b5f60208284031215610526576105256103cd565b5b5f82013567ffffffffffffffff811115610543576105426103d1565b5b61054f848285016104e4565b91505092915050565b7f4e487b71000000000000000000000000000000000000000000000000000000005f52601260045260245ffd5b7f4e487b71000000000000000000000000000000000000000000000000000000005f52601160045260245ffd5b5f6105bc82610393565b91506105c783610393565b9250826105d7576105d6610558565b5b828204905092915050565b5f6105ec82610393565b91506105f783610393565b92508261060757610606610558565b5b828206905092915050565b5f82825260208201905092915050565b7f416d6f756e74206973207a65726f0000000000000000000000000000000000005f82015250565b5f610656600e83610612565b915061066182610622565b602082019050919050565b5f6020820190508181035f8301526106838161064a565b9050919050565b7f416d6f756e74206d757374206265206d756c7469706c65206f662031305e31325f8201527f20576569202831206d7574657a29000000000000000000000000000000000000602082015250565b5f6106e4602e83610612565b91506106ef8261068a565b604082019050919050565b5f6020820190508181035f830152610711816106d8565b9050919050565b5f81519050919050565b8281835e5f83830152505050565b5f61073a82610718565b6107448185610612565b9350610754818560208601610722565b61075d816103dd565b840191505092915050565b5f6040820190508181035f8301526107808185610730565b905061078f602083018461039c565b9392505050565b5f81519050919050565b5f81905092915050565b5f6107b482610796565b6107be81856107a0565b93506107ce818560208601610722565b80840191505092915050565b5f6107e582846107aa565b915081905092915050565b7f43616c6c20746f20746865206f7574626f782073656e646572206661696c65645f82015250565b5f610824602083610612565b915061082f826107f0565b602082019050919050565b5f6020820190508181035f83015261085181610818565b9050919050565b50565b5f6108665f836107a0565b915061087182610858565b5f82019050919050565b5f6108858261085b565b9150819050919050565b7f4661696c656420746f206275726e0000000000000000000000000000000000005f82015250565b5f6108c3600e83610612565b91506108ce8261088f565b602082019050919050565b5f6020820190508181035f8301526108f0816108b7565b9050919050565b5f60408201905061090a5f83018561039c565b610917602083018461039c565b9392505050565b5f61092882610393565b91507fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff820361095a57610959610585565b5b60018201905091905056fea2646970667358221220d67e6526cfde4e09de705bb433aca50860217e291c987db0f57c478f8afd5cd364736f6c634300081e0033000000000000000000000000";

pub(crate) const FA_WITHDRAWAL_SOL_CONTRACT: &str = "0x608060405260043610610028575f3560e01c806320d786b51461002c57806380fc1fe314610056575b5f5ffd5b348015610037575f5ffd5b50610040610072565b60405161004d9190610576565b60405180910390f35b610070600480360381019061006b91906107b5565b610077565b005b5f5481565b5f73ff0000000000000000000000000000000000000390505f73ff0000000000000000000000000000000000000490505f85116100e9576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016100e0906108e4565b60405180910390fd5b5f84846040516020016100fd929190610974565b604051602081830303815290604052805190602001205f1c90505f81898860405160240161012d939291906109aa565b6040516020818303038152906040527fd93ad063000000000000000000000000000000000000000000000000000000007bffffffffffffffffffffffffffffffffffffffffffffffffffffffff19166020820180517bffffffffffffffffffffffffffffffffffffffffffffffffffffffff838183161783525050505090505f8373ffffffffffffffffffffffffffffffffffffffff16826040516101d291906109df565b5f604051808303815f865af19150503d805f811461020b576040519150601f19603f3d011682016040523d82523d5f602084013e610210565b606091505b5050905080610254576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161024b90610a8b565b60405180910390fd5b5f33898560405160240161026a93929190610aa9565b6040516020818303038152906040527fb5c5f672000000000000000000000000000000000000000000000000000000007bffffffffffffffffffffffffffffffffffffffffffffffffffffffff19166020820180517bffffffffffffffffffffffffffffffffffffffffffffffffffffffff838183161783525050505090505f8b73ffffffffffffffffffffffffffffffffffffffff168260405161030f91906109df565b5f604051808303815f865af19150503d805f8114610348576040519150601f19603f3d011682016040523d82523d5f602084013e61034d565b606091505b5050905080610391576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161038890610b28565b60405180910390fd5b5f8b8b8b8b6040516024016103a99493929190610b9d565b6040516020818303038152906040527fe9f58a77000000000000000000000000000000000000000000000000000000007bffffffffffffffffffffffffffffffffffffffffffffffffffffffff19166020820180517bffffffffffffffffffffffffffffffffffffffffffffffffffffffff838183161783525050505090505f8873ffffffffffffffffffffffffffffffffffffffff168260405161044e91906109df565b5f604051808303815f865af19150503d805f8114610487576040519150601f19603f3d011682016040523d82523d5f602084013e61048c565b606091505b50509050806104d0576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016104c790610c84565b60405180910390fd5b8d73ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff167fa58e97edea058c8c4d08b11659ee5656328622e45b2b9864cbd10054dc1769a08e5f54604051610530929190610ca2565b60405180910390a35f5f81548092919061054990610cf6565b91905055505050505050505050505050505050565b5f819050919050565b6105708161055e565b82525050565b5f6020820190506105895f830184610567565b92915050565b5f604051905090565b5f5ffd5b5f5ffd5b5f73ffffffffffffffffffffffffffffffffffffffff82169050919050565b5f6105c9826105a0565b9050919050565b6105d9816105bf565b81146105e3575f5ffd5b50565b5f813590506105f4816105d0565b92915050565b5f5ffd5b5f5ffd5b5f601f19601f8301169050919050565b7f4e487b71000000000000000000000000000000000000000000000000000000005f52604160045260245ffd5b61064882610602565b810181811067ffffffffffffffff8211171561066757610666610612565b5b80604052505050565b5f61067961058f565b9050610685828261063f565b919050565b5f67ffffffffffffffff8211156106a4576106a3610612565b5b6106ad82610602565b9050602081019050919050565b828183375f83830152505050565b5f6106da6106d58461068a565b610670565b9050828152602081018484840111156106f6576106f56105fe565b5b6107018482856106ba565b509392505050565b5f82601f83011261071d5761071c6105fa565b5b813561072d8482602086016106c8565b91505092915050565b61073f8161055e565b8114610749575f5ffd5b50565b5f8135905061075a81610736565b92915050565b5f7fffffffffffffffffffffffffffffffffffffffffffff0000000000000000000082169050919050565b61079481610760565b811461079e575f5ffd5b50565b5f813590506107af8161078b565b92915050565b5f5f5f5f5f60a086880312156107ce576107cd610598565b5b5f6107db888289016105e6565b955050602086013567ffffffffffffffff8111156107fc576107fb61059c565b5b61080888828901610709565b94505060406108198882890161074c565b935050606061082a888289016107a1565b925050608086013567ffffffffffffffff81111561084b5761084a61059c565b5b61085788828901610709565b9150509295509295909350565b5f82825260208201905092915050565b7f456d707479207769746864726177616c7320617265206e6f7420616c6c6f77655f8201527f6400000000000000000000000000000000000000000000000000000000000000602082015250565b5f6108ce602183610864565b91506108d982610874565b604082019050919050565b5f6020820190508181035f8301526108fb816108c2565b9050919050565b5f819050919050565b61091c61091782610760565b610902565b82525050565b5f81519050919050565b5f81905092915050565b8281835e5f83830152505050565b5f61094e82610922565b610958818561092c565b9350610968818560208601610936565b80840191505092915050565b5f61097f828561090b565b60168201915061098f8284610944565b91508190509392505050565b6109a4816105bf565b82525050565b5f6060820190506109bd5f830186610567565b6109ca602083018561099b565b6109d76040830184610567565b949350505050565b5f6109ea8284610944565b915081905092915050565b7f4661696c656420746f2064656372656d656e74207469636b65742062616c616e5f8201527f63653a207469636b65745f62616c616e63655f72656d6f76652063616c6c207760208201527f617320756e7375636365737366756c0000000000000000000000000000000000604082015250565b5f610a75604f83610864565b9150610a80826109f5565b606082019050919050565b5f6020820190508181035f830152610aa281610a69565b9050919050565b5f606082019050610abc5f83018661099b565b610ac96020830185610567565b610ad66040830184610567565b949350505050565b7f50726f78792063616c6c206661696c65640000000000000000000000000000005f82015250565b5f610b12601183610864565b9150610b1d82610ade565b602082019050919050565b5f6020820190508181035f830152610b3f81610b06565b9050919050565b5f82825260208201905092915050565b5f610b6082610922565b610b6a8185610b46565b9350610b7a818560208601610936565b610b8381610602565b840191505092915050565b610b9781610760565b82525050565b5f6080820190508181035f830152610bb58187610b56565b9050610bc46020830186610567565b610bd16040830185610b8e565b8181036060830152610be38184610b56565b905095945050505050565b7f4661696c656420746f2070726f64756365206d6573736167653a20707573685f5f8201527f66615f7769746864726177616c5f746f5f6f7574626f782063616c6c20756e7360208201527f75636365737366756c0000000000000000000000000000000000000000000000604082015250565b5f610c6e604983610864565b9150610c7982610bee565b606082019050919050565b5f6020820190508181035f830152610c9b81610c62565b9050919050565b5f604082019050610cb55f830185610567565b610cc26020830184610567565b9392505050565b7f4e487b71000000000000000000000000000000000000000000000000000000005f52601160045260245ffd5b5f610d008261055e565b91507fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff8203610d3257610d31610cc9565b5b60018201905091905056fea2646970667358221220cabc30b1caa3af6cb4e589ee15f1c56fcabbd2d5d9b0d431746df0cd288ed35764736f6c634300081d003300000000";

#[allow(dead_code)]
pub(crate) const INTERNAL_FORWARDER_SOL_CONTRACT: &str = "0x608060405234801561000f575f5ffd5b5060043610610034575f3560e01c806324d8dae9146100385780636fadcf7214610056575b5f5ffd5b610040610087565b60405161004d91906101d9565b60405180910390f35b610070600480360381019061006b9190610285565b61009f565b60405161007e92919061036c565b60405180910390f35b73ff0000000000000000000000000000000000000481565b5f606073ff0000000000000000000000000000000000000473ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614610124576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161011b9061041a565b60405180910390fd5b8473ffffffffffffffffffffffffffffffffffffffff16848460405161014b929190610474565b5f604051808303815f865af19150503d805f8114610184576040519150601f19603f3d011682016040523d82523d5f602084013e610189565b606091505b508092508193505050935093915050565b5f73ffffffffffffffffffffffffffffffffffffffff82169050919050565b5f6101c38261019a565b9050919050565b6101d3816101b9565b82525050565b5f6020820190506101ec5f8301846101ca565b92915050565b5f5ffd5b5f5ffd5b610203816101b9565b811461020d575f5ffd5b50565b5f8135905061021e816101fa565b92915050565b5f5ffd5b5f5ffd5b5f5ffd5b5f5f83601f84011261024557610244610224565b5b8235905067ffffffffffffffff81111561026257610261610228565b5b60208301915083600182028301111561027e5761027d61022c565b5b9250929050565b5f5f5f6040848603121561029c5761029b6101f2565b5b5f6102a986828701610210565b935050602084013567ffffffffffffffff8111156102ca576102c96101f6565b5b6102d686828701610230565b92509250509250925092565b5f8115159050919050565b6102f6816102e2565b82525050565b5f81519050919050565b5f82825260208201905092915050565b8281835e5f83830152505050565b5f601f19601f8301169050919050565b5f61033e826102fc565b6103488185610306565b9350610358818560208601610316565b61036181610324565b840191505092915050565b5f60408201905061037f5f8301856102ed565b81810360208301526103918184610334565b90509392505050565b5f82825260208201905092915050565b7f496e7465726e616c466f727761726465723a20756e617574686f72697a6564205f8201527f63616c6c65720000000000000000000000000000000000000000000000000000602082015250565b5f61040460268361039a565b915061040f826103aa565b604082019050919050565b5f6020820190508181035f830152610431816103f8565b9050919050565b5f81905092915050565b828183375f83830152505050565b5f61045b8385610438565b9350610468838584610442565b82840190509392505050565b5f610480828486610450565b9150819050939250505056fea26469706673582212206d81580ae0a655284dd4e1d1f4df37b5a6e657bbf28c8e9c68e1050c93e7754064736f6c634300081d0033000000000000000000";

pub(crate) const WITHDRAWAL_SOL_ADDR: Address = Address(FixedBytes::new([
    0xff, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x01,
]));

pub(crate) const FA_WITHDRAWAL_SOL_ADDR: Address = Address(FixedBytes::new([
    0xff, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x02,
]));

pub(crate) const SEND_OUTBOX_MESSAGE_PRECOMPILE_ADDRESS: Address =
    Address(FixedBytes::new([
        0xff, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x03,
    ]));

pub(crate) const TICKET_TABLE_PRECOMPILE_ADDRESS: Address = Address(FixedBytes::new([
    0xff, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x04,
]));

pub(crate) const CUSTOMS: [Address; 4] = [
    WITHDRAWAL_SOL_ADDR,
    FA_WITHDRAWAL_SOL_ADDR,
    SEND_OUTBOX_MESSAGE_PRECOMPILE_ADDRESS,
    TICKET_TABLE_PRECOMPILE_ADDRESS,
];
